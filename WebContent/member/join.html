<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>jQuery Event Demo</title>
    <script src="/js/jquery-3.4.1.js"></script>
    <script>
        $(function () {
            $('.error').hide();
            $('#id').focus();

            // $('sendMember').bind('click', function(event){
            // $('#sendMember').on('click', function (event){
            $('#sendMember').click(function (event) {
                // 기본 이벤트를 방지하기위해 사용한다. (form에 button이 있는 경우, enter를 치면 자동으로 전송이 된다. 그 기능을 방지하기 위한 기능)
                event.preventDefault();
                let id = $('#id').val(); // input은 입력창이기 때문에 text()가 아닌 val()로 가져온다.
                let email = $('#email').val();
                let password = $('#password').val();
                let checkPassword = $('#checkPassword').val();

                if (id) {
                    $('#errorId').hide();
                    
                } else {
                    $('#errorId').show();
                    $('#id').focus();
                    return;
                   
                }

                if (email) {
                    $('#errorEmail').hide();
                    
                } else {
                    $('#errorEmail').show();
                    $('#email').focus();
                    return;
                    
                }

                if (password) {
                    $('#errorPassword').hide();
                   
                } else {
                    $('#errorPassword').show();
                    $('#password').focus();
                    return;
                }

                if (checkPassword) {
                    $('#errorCheckPassword').hide();
                    
                } else {
                    $('#errorCheckPassword').show();
                    $('#checkPassword').focus();
                    $('#errorMissmatchPassword').hide();
                    return;
                }


                if(password != checkPassword){
                    $('#errorMissmatchPassword').show();
                    $('#checkPassword').val("");
                    $('#checkPassword').focus();
                    return;
                }else{
                    $('#errorMissmatchPassword').hide();
                }
                f.submit();            
            });
        });
    </script>

    <style>
        .error {
            color: red;
        }
    </style>

</head>

<body>
    <h3>jQuery Event</h3>
    <form action="/member/join" method="post" id="f">
        <label for="id">아이디</label>
        <input type="text" name="id" id="id" placeholder="아이디">
        <span class="error" id="errorId">아이디를 입력하세요</span>
        <br>

        <label for="email">이메일</label>
        <input type="text" name="email" id="email" placeholder="이메일">
        <span class="error" id="errorEmail">이메일을 입력하세요</span>
        <br>

        <label for="password">비밀번호</label>
        <input type="password" name="password" id="password" placeholder="비밀번호">
        <span class="error" id="errorPassword">비밀번호를 입력하세요</span>
        <br>

        <label for="checkPassword">비밀번호 확인</label>
        <input type="password" name="checkPassword" id="checkPassword" placeholder="비밀번호 확인">
        <span class="error" id="errorCheckPassword">비밀번호 확인을 입력하세요</span>
        <span class="error" id="errorMissmatchPassword">비밀번호가 일치하지 않습니다.</span>
        <br>

        <button type="submit" id="sendMember">회원가입</button>
        <button type="reset">취소</button>
    </form>


</body>

</html>